<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Posts</title>
  </head>
  <body>

    <h1>Rolling Social</h1>

    <label for="postsLimit">Cuantos post desea ver?</label>
    <select name="postsLimit" id="postsLimit">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
    </select>

    <section id="postsSection"></section>

    <script>
      function getAllPosts() {
        return '[{"userId":1,"id":1,"title":"sunt aut facere repellat provident occaecati excepturi optio reprehenderit","body":"quia et suscipit\\nsuscipit recusandae consequuntur expedita et cum\\nreprehenderit molestiae ut ut quas totam\\nnostrum rerum est autem sunt rem eveniet architecto"},{"userId":1,"id":2,"title":"qui est esse","body":"est rerum tempore vitae\\nsequi sint nihil reprehenderit dolor beatae ea dolores neque\\nfugiat blanditiis voluptate porro vel nihil molestiae ut reiciendis\\nqui aperiam non debitis possimus qui neque nisi nulla"},{"userId":1,"id":3,"title":"ea molestias quasi exercitationem repellat qui ipsa sit aut","body":"et iusto sed quo iure\\nvoluptatem occaecati omnis eligendi aut ad\\nvoluptatem doloribus vel accusantium quis pariatur\\nmolestiae porro eius odio et labore et velit aut"},{"userId":1,"id":4,"title":"eum et est occaecati","body":"ullam et saepe reiciendis voluptatem adipisci\\nsit amet autem assumenda provident rerum culpa\\nquis hic commodi nesciunt rem tenetur doloremque ipsam iure\\nquis sunt voluptatem rerum illo velit"}]';
      }
      const response = getAllPosts()
      const posts = JSON.parse(response)
      const postsLimitSelect = document.getElementById('postsLimit')

      
      postsLimitSelect.onchange = (e) => {
        let postsLimit = e.target.value
        console.log(postsLimit)
        renderPosts(postsLimit)
      }

      function renderPosts (postsLimit) {
        console.log('renderPosts called')
        const postsSection = document.getElementById('postsSection')
        postsSection.innerHTML = ''
        if(posts.length >= postsLimit) posts.length = postsLimit
        for (const post of posts) {
          const h3 = document.createElement('h3')
          const p = document.createElement('p')
          h3.innerText=post.title
          p.innerText=post.body
          postsSection.append(h3,p)
        }
      }

      renderPosts()

    </script>
  </body>
</html>
